{"ast":null,"code":"import axios from 'axios';\nclass PokemonService {\n  static async getPokemons() {\n    try {\n      const response = await axios.get('https://pokeapi.co/api/v2/pokemon?limit=100&offset=0&language=fr');\n      const fetchedPokemons = await Promise.all(response.data.results.map(async pokemon => {\n        const detailsResponse = await axios.get(pokemon.url);\n        return PokemonService.mapPokemon(detailsResponse.data);\n      }));\n      return fetchedPokemons;\n    } catch (error) {\n      console.error('Error fetching Pokemon data:', error);\n      throw new Error('Internal Server Error');\n    }\n  }\n  static async getPokemonById(id) {\n    try {\n      const response = await axios.get(`https://pokeapi.co/api/v2/pokemon/${id}`);\n      return PokemonService.mapPokemon(response.data);\n    } catch (error) {\n      console.error('Error fetching Pokemon data:', error);\n      throw new Error('Internal Server Error');\n    }\n  }\n  static async addPokemon(newPokemon) {\n    try {\n      const response = await axios.post(`http://localhost:3000/pokemon/}`, newPokemon);\n      return PokemonService.mapPokemon(response.data);\n    } catch (error) {\n      console.error('Erreur lors de l\\'ajout du Pokémon :', error);\n      throw new Error('Internal Server Error');\n    }\n  }\n  static async deletePokemon(id) {\n    try {\n      await axios.delete(`http://localhost:3000/pokemon/${id}`);\n    } catch (error) {\n      console.error('Erreur lors de la suppression du Pokémon :', error);\n      throw new Error('Internal Server Error');\n    }\n  }\n  static async updatePokemon(id, updatedPokemon) {\n    try {\n      // Récupérer le Pokémon existant\n      const existingPokemon = await axios.get(`http://localhost:3000/pokemon/${id}`);\n\n      // Fusionner les données existantes avec les données mises à jour\n      const mergedPokemon = {\n        ...existingPokemon.data,\n        ...updatedPokemon\n      };\n\n      // Effectuer la mise à jour via une requête PUT ou PATCH\n      const response = await axios.put(`http://localhost:3000/pokemon/${id}`, mergedPokemon);\n      return PokemonService.mapPokemon(response.data);\n    } catch (error) {\n      console.error('Erreur lors de la mise à jour du Pokémon :', error);\n      throw new Error('Internal Server Error');\n    }\n  }\n  static async searchPokemon(keyword) {\n    try {\n      // Récupérer la liste complète des Pokémon\n      const response = await axios.get('https://pokeapi.co/api/v2/pokemon?limit=100&offset=0&language=fr');\n      const pokemonList = response.data.results;\n\n      // Filtrer les Pokémon dont le nom contient le mot-clé\n      const matchingPokemons = pokemonList.filter(pokemon => pokemon.name.includes(keyword.toLowerCase()));\n      if (matchingPokemon) {\n        const detailsResponse = await axios.get(matchingPokemon.url);\n        return PokemonService.mapPokemon(detailsResponse.data);\n      } else {\n        return null; // Aucun Pokémon trouvé\n      }\n    } catch (error) {\n      // Ajouter une vérification spécifique pour le cas où le Pokémon n'est pas trouvé\n      if (error.response && error.response.status === 404) {\n        console.log(`Aucun Pokémon contenant \"${keyword}\" n'a été trouvé dans l'API.`);\n        return null;\n      }\n      console.error('Erreur lors de la recherche du Pokémon :', error);\n      throw new Error('Internal Server Error');\n    }\n  }\n  static mapPokemon(data) {\n    return {\n      id: data.id,\n      name: data.name,\n      hp: data.stats[0].base_stat,\n      cp: data.stats[1].base_stat,\n      picture: data.sprites.front_default,\n      types: data.types.map(type => type.type.name),\n      created: new Date()\n    };\n  }\n}\nexport default PokemonService;","map":{"version":3,"names":["axios","PokemonService","getPokemons","response","get","fetchedPokemons","Promise","all","data","results","map","pokemon","detailsResponse","url","mapPokemon","error","console","Error","getPokemonById","id","addPokemon","newPokemon","post","deletePokemon","delete","updatePokemon","updatedPokemon","existingPokemon","mergedPokemon","put","searchPokemon","keyword","pokemonList","matchingPokemons","filter","name","includes","toLowerCase","matchingPokemon","status","log","hp","stats","base_stat","cp","picture","sprites","front_default","types","type","created","Date"],"sources":["C:/Users/Fariziala/Desktop/SITE/pokemon/src/models/pokemon-service.ts"],"sourcesContent":["import axios from 'axios';\r\n\r\ninterface Pokemon {\r\n  id: number;\r\n  name: string;\r\n  hp: number;\r\n  cp: number;\r\n  picture: string;\r\n  types: string[];\r\n  created: Date;\r\n}\r\n\r\nclass PokemonService {\r\n  static async getPokemons(): Promise<Pokemon[]> {\r\n    try {\r\n      const response = await axios.get('https://pokeapi.co/api/v2/pokemon?limit=100&offset=0&language=fr');\r\n      const fetchedPokemons = await Promise.all(response.data.results.map(async (pokemon: any) => {\r\n        const detailsResponse = await axios.get(pokemon.url);\r\n        return PokemonService.mapPokemon(detailsResponse.data);\r\n      }));\r\n      return fetchedPokemons;\r\n    } catch (error) {\r\n      console.error('Error fetching Pokemon data:', error);\r\n      throw new Error('Internal Server Error');\r\n    }\r\n  }\r\n\r\n  static async getPokemonById(id: number): Promise<Pokemon> {\r\n    try {\r\n      const response = await axios.get(`https://pokeapi.co/api/v2/pokemon/${id}`);\r\n      return PokemonService.mapPokemon(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching Pokemon data:', error);\r\n      throw new Error('Internal Server Error');\r\n    }\r\n  }\r\n  static async addPokemon(newPokemon: Pokemon): Promise<Pokemon> {\r\n    try {\r\n      const response = await axios.post(`http://localhost:3000/pokemon/}`, newPokemon);\r\n      return PokemonService.mapPokemon(response.data);\r\n    } catch (error) {\r\n      console.error('Erreur lors de l\\'ajout du Pokémon :', error);\r\n      throw new Error('Internal Server Error');\r\n    }\r\n  }\r\n\r\n  static async deletePokemon(id: number): Promise<void> {\r\n    try {\r\n      await axios.delete(`http://localhost:3000/pokemon/${id}`);\r\n    } catch (error) {\r\n      console.error('Erreur lors de la suppression du Pokémon :', error);\r\n      throw new Error('Internal Server Error');\r\n    }\r\n  }\r\n\r\n  static async updatePokemon(id: number, updatedPokemon: Partial<Pokemon>): Promise<Pokemon> {\r\n    try {\r\n      // Récupérer le Pokémon existant\r\n      const existingPokemon = await axios.get(`http://localhost:3000/pokemon/${id}`);\r\n\r\n      // Fusionner les données existantes avec les données mises à jour\r\n      const mergedPokemon = { ...existingPokemon.data, ...updatedPokemon };\r\n\r\n      // Effectuer la mise à jour via une requête PUT ou PATCH\r\n      const response = await axios.put(`http://localhost:3000/pokemon/${id}`, mergedPokemon);\r\n\r\n      return PokemonService.mapPokemon(response.data);\r\n    } catch (error) {\r\n      console.error('Erreur lors de la mise à jour du Pokémon :', error);\r\n      throw new Error('Internal Server Error');\r\n    }\r\n  }\r\n\r\n  static async searchPokemon(keyword: string): Promise<Pokemon | null> {\r\n    try {\r\n      // Récupérer la liste complète des Pokémon\r\n      const response = await axios.get('https://pokeapi.co/api/v2/pokemon?limit=100&offset=0&language=fr');\r\n      const pokemonList = response.data.results;\r\n  \r\n      // Filtrer les Pokémon dont le nom contient le mot-clé\r\n    const matchingPokemons = pokemonList.filter((pokemon: any) =>\r\n    pokemon.name.includes(keyword.toLowerCase())\r\n  );\r\n  \r\n      if (matchingPokemon) {\r\n        const detailsResponse = await axios.get(matchingPokemon.url);\r\n        return PokemonService.mapPokemon(detailsResponse.data);\r\n      } else {\r\n        return null; // Aucun Pokémon trouvé\r\n      }\r\n    } catch (error) {\r\n      // Ajouter une vérification spécifique pour le cas où le Pokémon n'est pas trouvé\r\n      if (error.response && error.response.status === 404) {\r\n        console.log(`Aucun Pokémon contenant \"${keyword}\" n'a été trouvé dans l'API.`);\r\n        return null;\r\n      }\r\n      console.error('Erreur lors de la recherche du Pokémon :', error);\r\n      throw new Error('Internal Server Error');\r\n    }\r\n  }\r\n  \r\n  \r\n\r\n  private static mapPokemon(data: any): Pokemon {\r\n    return {\r\n      id: data.id,\r\n      name: data.name,\r\n      hp: data.stats[0].base_stat,\r\n      cp: data.stats[1].base_stat,\r\n      picture: data.sprites.front_default,\r\n      types: data.types.map((type: any) => type.type.name),\r\n      created: new Date(),\r\n    };\r\n  }\r\n}\r\n\r\nexport default PokemonService;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}